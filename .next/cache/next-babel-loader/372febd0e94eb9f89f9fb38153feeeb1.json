{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport auth0 from '../lib/auth0';\nexport default function withAuth(InnerComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(Authenticated, _Component);\n\n      _createClass(Authenticated, null, [{\n        key: \"getInitialProps\",\n        value: function getInitialProps(_ref) {\n          var req, res, session;\n          return _regeneratorRuntime.async(function getInitialProps$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  req = _ref.req, res = _ref.res;\n                  _context.next = 3;\n                  return _regeneratorRuntime.awrap(auth0.getSession(req));\n\n                case 3:\n                  session = _context.sent;\n\n                  if (!(!session || !session.user)) {\n                    _context.next = 8;\n                    break;\n                  }\n\n                  res.writeHead(302, {\n                    Location: '/api/login'\n                  });\n                  res.end();\n                  return _context.abrupt(\"return\");\n\n                case 8:\n                  return _context.abrupt(\"return\", {\n                    user: session.user\n                  });\n\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          });\n        }\n      }]);\n\n      function Authenticated(props) {\n        _classCallCheck(this, Authenticated);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Authenticated).call(this, props));\n      }\n\n      _createClass(Authenticated, [{\n        key: \"render\",\n        value: function render() {\n          return __jsx(\"div\", null, __jsx(InnerComponent, _extends({}, this.props, {\n            user: this.props.user\n          })));\n        }\n      }]);\n\n      return Authenticated;\n    }(Component)\n  );\n}\n;","map":null,"metadata":{},"sourceType":"module"}